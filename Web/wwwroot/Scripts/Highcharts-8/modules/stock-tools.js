/*
 Highstock JS v8.2.2 (2020-10-22)

 Advanced Highstock tools

 (c) 2010-2019 Highsoft AS
 Author: Torstein Honsi

 License: www.highcharts.com/license
*/
(function(w){"object"===typeof module&&module.exports?(w["default"]=w,module.exports=w):"function"===typeof define&&define.amd?define("highcharts/modules/stock-tools",["highcharts","highcharts/modules/stock"],function(q){w(q);w.Highcharts=q;return w}):w("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(w){function q(b,l,d,p){b.hasOwnProperty(l)||(b[l]=p.apply(null,d))}var d=w?w._modules:{};q(d,"Extensions/Annotations/Mixins/EventEmitterMixin.js",[d["Core/Globals.js"],d["Core/Utilities.js"]],
function(b,l){var d=l.addEvent,p=l.fireEvent,m=l.objectEach,z=l.pick,c=l.removeEvent;return{addEvents:function(){var c=this,f=function(e){d(e,b.isTouchDevice?"touchstart":"mousedown",function(e){c.onMouseDown(e)})};f(this.graphic.element);(c.labels||[]).forEach(function(e){e.options.useHTML&&e.graphic.text&&f(e.graphic.text.element)});m(c.options.events,function(e,f){var h=function(h){"click"===f&&c.cancelClick||e.call(c,c.chart.pointer.normalize(h),c.target)};if(-1===(c.nonDOMEvents||[]).indexOf(f))c.graphic.on(f,
h);else d(c,f,h)});if(c.options.draggable&&(d(c,"drag",c.onDrag),!c.graphic.renderer.styledMode)){var e={cursor:{x:"ew-resize",y:"ns-resize",xy:"move"}[c.options.draggable]};c.graphic.css(e);(c.labels||[]).forEach(function(f){f.options.useHTML&&f.graphic.text&&f.graphic.text.css(e)})}c.isUpdating||p(c,"add")},removeDocEvents:function(){this.removeDrag&&(this.removeDrag=this.removeDrag());this.removeMouseUp&&(this.removeMouseUp=this.removeMouseUp())},onMouseDown:function(c){var f=this,e=f.chart.pointer;
c.preventDefault&&c.preventDefault();if(2!==c.button){c=e.normalize(c);var r=c.chartX;var h=c.chartY;f.cancelClick=!1;f.chart.hasDraggedAnnotation=!0;f.removeDrag=d(b.doc,b.isTouchDevice?"touchmove":"mousemove",function(c){f.hasDragged=!0;c=e.normalize(c);c.prevChartX=r;c.prevChartY=h;p(f,"drag",c);r=c.chartX;h=c.chartY});f.removeMouseUp=d(b.doc,b.isTouchDevice?"touchend":"mouseup",function(e){f.cancelClick=f.hasDragged;f.hasDragged=!1;f.chart.hasDraggedAnnotation=!1;p(z(f.target,f),"afterUpdate");
f.onMouseUp(e)})}},onMouseUp:function(c){var f=this.chart;c=this.target||this;var e=f.options.annotations;f=f.annotations.indexOf(c);this.removeDocEvents();e[f]=c.options},onDrag:function(c){if(this.chart.isInsidePlot(c.chartX-this.chart.plotLeft,c.chartY-this.chart.plotTop)){var f=this.mouseMoveToTranslation(c);"x"===this.options.draggable&&(f.y=0);"y"===this.options.draggable&&(f.x=0);this.points.length?this.translate(f.x,f.y):(this.shapes.forEach(function(e){e.translate(f.x,f.y)}),this.labels.forEach(function(e){e.translate(f.x,
f.y)}));this.redraw(!1)}},mouseMoveToRadians:function(c,f,e){var b=c.prevChartY-e,h=c.prevChartX-f;e=c.chartY-e;c=c.chartX-f;this.chart.inverted&&(f=h,h=b,b=f,f=c,c=e,e=f);return Math.atan2(e,c)-Math.atan2(b,h)},mouseMoveToTranslation:function(c){var f=c.chartX-c.prevChartX;c=c.chartY-c.prevChartY;if(this.chart.inverted){var e=c;c=f;f=e}return{x:f,y:c}},mouseMoveToScale:function(c,f,e){f=(c.chartX-f||1)/(c.prevChartX-f||1);c=(c.chartY-e||1)/(c.prevChartY-e||1);this.chart.inverted&&(e=c,c=f,f=e);return{x:f,
y:c}},destroy:function(){this.removeDocEvents();c(this);this.hcEvents=null}}});q(d,"Extensions/Annotations/ControlPoint.js",[d["Core/Utilities.js"],d["Extensions/Annotations/Mixins/EventEmitterMixin.js"]],function(b,l){var d=b.merge,p=b.pick;return function(){function b(b,c,d,f){this.addEvents=l.addEvents;this.graphic=void 0;this.mouseMoveToRadians=l.mouseMoveToRadians;this.mouseMoveToScale=l.mouseMoveToScale;this.mouseMoveToTranslation=l.mouseMoveToTranslation;this.onDrag=l.onDrag;this.onMouseDown=
l.onMouseDown;this.onMouseUp=l.onMouseUp;this.removeDocEvents=l.removeDocEvents;this.nonDOMEvents=["drag"];this.chart=b;this.target=c;this.options=d;this.index=p(d.index,f)}b.prototype.setVisibility=function(b){this.graphic.attr("visibility",b?"visible":"hidden");this.options.visible=b};b.prototype.render=function(){var b=this.chart,c=this.options;this.graphic=b.renderer.symbol(c.symbol,0,0,c.width,c.height).add(b.controlPointsGroup).css(c.style);this.setVisibility(c.visible);this.addEvents()};b.prototype.redraw=
function(b){this.graphic[b?"animate":"attr"](this.options.positioner.call(this,this.target))};b.prototype.destroy=function(){l.destroy.call(this);this.graphic&&(this.graphic=this.graphic.destroy());this.options=this.target=this.chart=null};b.prototype.update=function(b){var c=this.chart,l=this.target,f=this.index;b=d(!0,this.options,b);this.destroy();this.constructor(c,l,b,f);this.render(c.controlPointsGroup);this.redraw()};return b}()});q(d,"Extensions/Annotations/MockPoint.js",[d["Core/Globals.js"],
d["Core/Utilities.js"],d["Core/Axis/Axis.js"]],function(b,d,n){var l=d.defined,m=d.fireEvent;return function(){function d(c,d,f){this.y=this.x=this.plotY=this.plotX=this.isInside=void 0;this.mock=!0;this.series={visible:!0,chart:c,getPlotBox:b.Series.prototype.getPlotBox};this.target=d||null;this.options=f;this.applyOptions(this.getOptions())}d.fromPoint=function(c){return new d(c.series.chart,null,{x:c.x,y:c.y,xAxis:c.series.xAxis,yAxis:c.series.yAxis})};d.pointToPixels=function(c,b){var f=c.series,
e=f.chart,r=c.plotX,h=c.plotY;e.inverted&&(c.mock?(r=c.plotY,h=c.plotX):(r=e.plotWidth-c.plotY,h=e.plotHeight-c.plotX));f&&!b&&(c=f.getPlotBox(),r+=c.translateX,h+=c.translateY);return{x:r,y:h}};d.pointToOptions=function(c){return{x:c.x,y:c.y,xAxis:c.series.xAxis,yAxis:c.series.yAxis}};d.prototype.hasDynamicOptions=function(){return"function"===typeof this.options};d.prototype.getOptions=function(){return this.hasDynamicOptions()?this.options(this.target):this.options};d.prototype.applyOptions=function(c){this.command=
c.command;this.setAxis(c,"x");this.setAxis(c,"y");this.refresh()};d.prototype.setAxis=function(c,b){b+="Axis";c=c[b];var f=this.series.chart;this.series[b]=c instanceof n?c:l(c)?f[b][c]||f.get(c):null};d.prototype.toAnchor=function(){var c=[this.plotX,this.plotY,0,0];this.series.chart.inverted&&(c[0]=this.plotY,c[1]=this.plotX);return c};d.prototype.getLabelConfig=function(){return{x:this.x,y:this.y,point:this}};d.prototype.isInsidePlot=function(){var c=this.plotX,b=this.plotY,f=this.series.xAxis,
e=this.series.yAxis,r={x:c,y:b,isInsidePlot:!0};f&&(r.isInsidePlot=l(c)&&0<=c&&c<=f.len);e&&(r.isInsidePlot=r.isInsidePlot&&l(b)&&0<=b&&b<=e.len);m(this.series.chart,"afterIsInsidePlot",r);return r.isInsidePlot};d.prototype.refresh=function(){var c=this.series,b=c.xAxis;c=c.yAxis;var f=this.getOptions();b?(this.x=f.x,this.plotX=b.toPixels(f.x,!0)):(this.x=null,this.plotX=f.x);c?(this.y=f.y,this.plotY=c.toPixels(f.y,!0)):(this.y=null,this.plotY=f.y);this.isInside=this.isInsidePlot()};d.prototype.translate=
function(c,b,f,e){this.hasDynamicOptions()||(this.plotX+=f,this.plotY+=e,this.refreshOptions())};d.prototype.scale=function(c,b,f,e){if(!this.hasDynamicOptions()){var r=this.plotY*e;this.plotX=(1-f)*c+this.plotX*f;this.plotY=(1-e)*b+r;this.refreshOptions()}};d.prototype.rotate=function(c,b,f){if(!this.hasDynamicOptions()){var e=Math.cos(f);f=Math.sin(f);var r=this.plotX,h=this.plotY;r-=c;h-=b;this.plotX=r*e-h*f+c;this.plotY=r*f+h*e+b;this.refreshOptions()}};d.prototype.refreshOptions=function(){var c=
this.series,b=c.xAxis;c=c.yAxis;this.x=this.options.x=b?this.options.x=b.toValue(this.plotX,!0):this.plotX;this.y=this.options.y=c?c.toValue(this.plotY,!0):this.plotY};return d}()});q(d,"Extensions/Annotations/Mixins/ControllableMixin.js",[d["Extensions/Annotations/ControlPoint.js"],d["Extensions/Annotations/MockPoint.js"],d["Core/Tooltip.js"],d["Core/Utilities.js"]],function(b,d,n,p){var l=p.isObject,z=p.isString,c=p.merge,D=p.splat;return{init:function(c,e,b){this.annotation=c;this.chart=c.chart;
this.options=e;this.points=[];this.controlPoints=[];this.index=b;this.linkPoints();this.addControlPoints()},attr:function(){this.graphic.attr.apply(this.graphic,arguments)},getPointsOptions:function(){var c=this.options;return c.points||c.point&&D(c.point)},attrsFromOptions:function(c){var e=this.constructor.attrsMap,b={},f,d=this.chart.styledMode;for(f in c){var g=e[f];!g||d&&-1!==["fill","stroke","stroke-width"].indexOf(g)||(b[g]=c[f])}return b},anchor:function(b){var e=b.series.getPlotBox(),f=
b.series.chart,h=b.mock?b.toAnchor():n.prototype.getAnchor.call({chart:b.series.chart},b);h={x:h[0]+(this.options.x||0),y:h[1]+(this.options.y||0),height:h[2]||0,width:h[3]||0};return{relativePosition:h,absolutePosition:c(h,{x:h.x+(b.mock?e.translateX:f.plotLeft),y:h.y+(b.mock?e.translateY:f.plotTop)})}},point:function(c,b){if(c&&c.series)return c;b&&null!==b.series||(l(c)?b=new d(this.chart,this,c):z(c)?b=this.chart.get(c)||null:"function"===typeof c&&(b=c.call(b,this),b=b.series?b:new d(this.chart,
this,c)));return b},linkPoints:function(){var c=this.getPointsOptions(),b=this.points,r=c&&c.length||0,h;for(h=0;h<r;h++){var d=this.point(c[h],b[h]);if(!d){b.length=0;return}d.mock&&d.refresh();b[h]=d}return b},addControlPoints:function(){var f=this.options.controlPoints;(f||[]).forEach(function(e,d){e=c(this.options.controlPointOptions,e);e.index||(e.index=d);f[d]=e;this.controlPoints.push(new b(this.chart,this,e))},this)},shouldBeDrawn:function(){return!!this.points.length},render:function(c){this.controlPoints.forEach(function(c){c.render()})},
redraw:function(c){this.controlPoints.forEach(function(b){b.redraw(c)})},transform:function(c,b,d,h,l){if(this.chart.inverted){var e=b;b=d;d=e}this.points.forEach(function(a,k){this.transformPoint(c,b,d,h,l,k)},this)},transformPoint:function(c,b,r,h,l,g){var a=this.points[g];a.mock||(a=this.points[g]=d.fromPoint(a));a[c](b,r,h,l)},translate:function(c,b){this.transform("translate",null,null,c,b)},translatePoint:function(c,b,d){this.transformPoint("translate",null,null,c,b,d)},translateShape:function(c,
b){var e=this.annotation.chart,h=this.annotation.userOptions,f=e.annotations.indexOf(this.annotation);e=e.options.annotations[f];this.translatePoint(c,b,0);e[this.collection][this.index].point=this.options.point;h[this.collection][this.index].point=this.options.point},rotate:function(c,b,d){this.transform("rotate",c,b,d)},scale:function(c,b,d,h){this.transform("scale",c,b,d,h)},setControlPointsVisibility:function(c){this.controlPoints.forEach(function(b){b.setVisibility(c)})},destroy:function(){this.graphic&&
(this.graphic=this.graphic.destroy());this.tracker&&(this.tracker=this.tracker.destroy());this.controlPoints.forEach(function(c){c.destroy()});this.options=this.controlPoints=this.points=this.chart=null;this.annotation&&(this.annotation=null)},update:function(b){var e=this.annotation;b=c(!0,this.options,b);var d=this.graphic.parentGroup;this.destroy();this.constructor(e,b);this.render(d);this.redraw()}}});q(d,"Extensions/Annotations/Mixins/MarkerMixin.js",[d["Core/Chart/Chart.js"],d["Core/Renderer/SVG/SVGRenderer.js"],
d["Core/Utilities.js"]],function(b,d,n){function l(c){return function(b){this.attr(c,"url(#"+b+")")}}var m=n.addEvent,z=n.defined,c=n.merge,D=n.objectEach,f=n.uniqueKey,e={arrow:{tagName:"marker",render:!1,id:"arrow",refY:5,refX:9,markerWidth:10,markerHeight:10,children:[{tagName:"path",d:"M 0 0 L 10 5 L 0 10 Z",strokeWidth:0}]},"reverse-arrow":{tagName:"marker",render:!1,id:"reverse-arrow",refY:5,refX:1,markerWidth:10,markerHeight:10,children:[{tagName:"path",d:"M 0 5 L 10 0 L 10 10 Z",strokeWidth:0}]}};
d.prototype.addMarker=function(b,e){var h={id:b},g={stroke:e.color||"none",fill:e.color||"rgba(0, 0, 0, 0.75)"};h.children=e.children.map(function(a){return c(g,a)});e=this.definition(c(!0,{markerWidth:20,markerHeight:20,refX:0,refY:0,orient:"auto"},e,h));e.id=b;return e};d={markerEndSetter:l("marker-end"),markerStartSetter:l("marker-start"),setItemMarkers:function(b){var e=b.options,d=b.chart,g=d.options.defs,a=e.fill,k=z(a)&&"none"!==a?a:e.stroke;["markerStart","markerEnd"].forEach(function(a){var h=
e[a],t;if(h){for(t in g){var r=g[t];if(h===r.id&&"marker"===r.tagName){var v=r;break}}v&&(h=b[a]=d.renderer.addMarker((e.id||f())+"-"+v.id,c(v,{color:k})),b.attr(a,h.attr("id")))}})}};m(b,"afterGetContainer",function(){this.options.defs=c(e,this.options.defs||{});D(this.options.defs,function(c){"marker"===c.tagName&&!1!==c.render&&this.renderer.addMarker(c.id,c)},this)});return d});q(d,"Extensions/Annotations/Controllables/ControllablePath.js",[d["Extensions/Annotations/Mixins/ControllableMixin.js"],
d["Core/Globals.js"],d["Extensions/Annotations/Mixins/MarkerMixin.js"],d["Core/Utilities.js"]],function(b,d,n,p){var l=p.extend,z="rgba(192,192,192,"+(d.svg?.0001:.002)+")";return function(){function c(c,d,e){this.addControlPoints=b.addControlPoints;this.anchor=b.anchor;this.attr=b.attr;this.attrsFromOptions=b.attrsFromOptions;this.destroy=b.destroy;this.getPointsOptions=b.getPointsOptions;this.init=b.init;this.linkPoints=b.linkPoints;this.point=b.point;this.rotate=b.rotate;this.scale=b.scale;this.setControlPointsVisibility=
b.setControlPointsVisibility;this.setMarkers=n.setItemMarkers;this.transform=b.transform;this.transformPoint=b.transformPoint;this.translate=b.translate;this.translatePoint=b.translatePoint;this.translateShape=b.translateShape;this.update=b.update;this.type="path";this.init(c,d,e);this.collection="shapes"}c.prototype.toD=function(){var c=this.options.d;if(c)return"function"===typeof c?c.call(this):c;c=this.points;var b=c.length,e=b,d=c[0],h=e&&this.anchor(d).absolutePosition,l=0,g=[];if(h)for(g.push(["M",
h.x,h.y]);++l<b&&e;)d=c[l],e=d.command||"L",h=this.anchor(d).absolutePosition,"M"===e?g.push([e,h.x,h.y]):"L"===e?g.push([e,h.x,h.y]):"Z"===e&&g.push([e]),e=d.series.visible;return e?this.chart.renderer.crispLine(g,this.graphic.strokeWidth()):null};c.prototype.shouldBeDrawn=function(){return b.shouldBeDrawn.call(this)||!!this.options.d};c.prototype.render=function(c){var d=this.options,e=this.attrsFromOptions(d);this.graphic=this.annotation.chart.renderer.path([["M",0,0]]).attr(e).add(c);d.className&&
this.graphic.addClass(d.className);this.tracker=this.annotation.chart.renderer.path([["M",0,0]]).addClass("highcharts-tracker-line").attr({zIndex:2}).add(c);this.annotation.chart.styledMode||this.tracker.attr({"stroke-linejoin":"round",stroke:z,fill:z,"stroke-width":this.graphic.strokeWidth()+2*d.snap});b.render.call(this);l(this.graphic,{markerStartSetter:n.markerStartSetter,markerEndSetter:n.markerEndSetter});this.setMarkers(this)};c.prototype.redraw=function(c){var d=this.toD(),e=c?"animate":"attr";
d?(this.graphic[e]({d:d}),this.tracker[e]({d:d})):(this.graphic.attr({d:"M 0 -9000000000"}),this.tracker.attr({d:"M 0 -9000000000"}));this.graphic.placed=this.tracker.placed=!!d;b.redraw.call(this,c)};c.attrsMap={dashStyle:"dashstyle",strokeWidth:"stroke-width",stroke:"stroke",fill:"fill",zIndex:"zIndex"};return c}()});q(d,"Extensions/Annotations/Controllables/ControllableRect.js",[d["Extensions/Annotations/Mixins/ControllableMixin.js"],d["Extensions/Annotations/Controllables/ControllablePath.js"],
d["Core/Utilities.js"]],function(b,d,n){var l=n.merge;return function(){function m(d,c,l){this.addControlPoints=b.addControlPoints;this.anchor=b.anchor;this.attr=b.attr;this.attrsFromOptions=b.attrsFromOptions;this.destroy=b.destroy;this.getPointsOptions=b.getPointsOptions;this.init=b.init;this.linkPoints=b.linkPoints;this.point=b.point;this.rotate=b.rotate;this.scale=b.scale;this.setControlPointsVisibility=b.setControlPointsVisibility;this.shouldBeDrawn=b.shouldBeDrawn;this.transform=b.transform;
this.transformPoint=b.transformPoint;this.translatePoint=b.translatePoint;this.translateShape=b.translateShape;this.update=b.update;this.type="rect";this.translate=b.translateShape;this.init(d,c,l);this.collection="shapes"}m.prototype.render=function(d){var c=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.rect(0,-9E9,0,0).attr(c).add(d);b.render.call(this)};m.prototype.redraw=function(d){var c=this.anchor(this.points[0]).absolutePosition;if(c)this.graphic[d?"animate":
"attr"]({x:c.x,y:c.y,width:this.options.width,height:this.options.height});else this.attr({x:0,y:-9E9});this.graphic.placed=!!c;b.redraw.call(this,d)};m.attrsMap=l(d.attrsMap,{width:"width",height:"height"});return m}()});q(d,"Extensions/Annotations/Controllables/ControllableCircle.js",[d["Extensions/Annotations/Mixins/ControllableMixin.js"],d["Extensions/Annotations/Controllables/ControllablePath.js"],d["Core/Utilities.js"]],function(b,d,n){var l=n.merge;return function(){function m(d,c,l){this.addControlPoints=
b.addControlPoints;this.anchor=b.anchor;this.attr=b.attr;this.attrsFromOptions=b.attrsFromOptions;this.destroy=b.destroy;this.getPointsOptions=b.getPointsOptions;this.init=b.init;this.linkPoints=b.linkPoints;this.point=b.point;this.rotate=b.rotate;this.scale=b.scale;this.setControlPointsVisibility=b.setControlPointsVisibility;this.shouldBeDrawn=b.shouldBeDrawn;this.transform=b.transform;this.transformPoint=b.transformPoint;this.translatePoint=b.translatePoint;this.translateShape=b.translateShape;
this.update=b.update;this.type="circle";this.translate=b.translateShape;this.init(d,c,l);this.collection="shapes"}m.prototype.render=function(d){var c=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.circle(0,-9E9,0).attr(c).add(d);b.render.call(this)};m.prototype.redraw=function(d){var c=this.anchor(this.points[0]).absolutePosition;if(c)this.graphic[d?"animate":"attr"]({x:c.x,y:c.y,r:this.options.r});else this.graphic.attr({x:0,y:-9E9});this.graphic.placed=!!c;b.redraw.call(this,
d)};m.prototype.setRadius=function(b){this.options.r=b};m.attrsMap=l(d.attrsMap,{r:"r"});return m}()});q(d,"Extensions/Annotations/Controllables/ControllableLabel.js",[d["Extensions/Annotations/Mixins/ControllableMixin.js"],d["Extensions/Annotations/MockPoint.js"],d["Core/Renderer/SVG/SVGRenderer.js"],d["Core/Tooltip.js"],d["Core/Utilities.js"]],function(b,d,n,p,m){var l=m.extend,c=m.format,q=m.isNumber,f=m.pick;m=function(){function e(c,d,e){this.addControlPoints=b.addControlPoints;this.attr=b.attr;
this.attrsFromOptions=b.attrsFromOptions;this.destroy=b.destroy;this.getPointsOptions=b.getPointsOptions;this.init=b.init;this.linkPoints=b.linkPoints;this.point=b.point;this.rotate=b.rotate;this.scale=b.scale;this.setControlPointsVisibility=b.setControlPointsVisibility;this.shouldBeDrawn=b.shouldBeDrawn;this.transform=b.transform;this.transformPoint=b.transformPoint;this.translateShape=b.translateShape;this.update=b.update;this.init(c,d,e);this.collection="labels"}e.alignedPosition=function(c,b){var d=
c.align,e=c.verticalAlign,a=(b.x||0)+(c.x||0),k=(b.y||0)+(c.y||0),h,u;"right"===d?h=1:"center"===d&&(h=2);h&&(a+=(b.width-(c.width||0))/h);"bottom"===e?u=1:"middle"===e&&(u=2);u&&(k+=(b.height-(c.height||0))/u);return{x:Math.round(a),y:Math.round(k)}};e.justifiedOptions=function(c,b,d,e){var a=d.align,k=d.verticalAlign,h=b.box?0:b.padding||0,g=b.getBBox();b={align:a,verticalAlign:k,x:d.x,y:d.y,width:b.width,height:b.height};d=e.x-c.plotLeft;var f=e.y-c.plotTop;e=d+h;0>e&&("right"===a?b.align="left":
b.x=-e);e=d+g.width-h;e>c.plotWidth&&("left"===a?b.align="right":b.x=c.plotWidth-e);e=f+h;0>e&&("bottom"===k?b.verticalAlign="top":b.y=-e);e=f+g.height-h;e>c.plotHeight&&("top"===k?b.verticalAlign="bottom":b.y=c.plotHeight-e);return b};e.prototype.translatePoint=function(c,d){b.translatePoint.call(this,c,d,0)};e.prototype.translate=function(c,b){var d=this.annotation.chart,e=this.annotation.userOptions,a=d.annotations.indexOf(this.annotation);a=d.options.annotations[a];d.inverted&&(d=c,c=b,b=d);this.options.x+=
c;this.options.y+=b;a[this.collection][this.index].x=this.options.x;a[this.collection][this.index].y=this.options.y;e[this.collection][this.index].x=this.options.x;e[this.collection][this.index].y=this.options.y};e.prototype.render=function(c){var d=this.options,f=this.attrsFromOptions(d),g=d.style;this.graphic=this.annotation.chart.renderer.label("",0,-9999,d.shape,null,null,d.useHTML,null,"annotation-label").attr(f).add(c);this.annotation.chart.styledMode||("contrast"===g.color&&(g.color=this.annotation.chart.renderer.getContrast(-1<
e.shapesWithoutBackground.indexOf(d.shape)?"#FFFFFF":d.backgroundColor)),this.graphic.css(d.style).shadow(d.shadow));d.className&&this.graphic.addClass(d.className);this.graphic.labelrank=d.labelrank;b.render.call(this)};e.prototype.redraw=function(d){var e=this.options,f=this.text||e.format||e.text,g=this.graphic,a=this.points[0];g.attr({text:f?c(f,a.getLabelConfig(),this.annotation.chart):e.formatter.call(a,this)});e=this.anchor(a);(f=this.position(e))?(g.alignAttr=f,f.anchorX=e.absolutePosition.x,
f.anchorY=e.absolutePosition.y,g[d?"animate":"attr"](f)):g.attr({x:0,y:-9999});g.placed=!!f;b.redraw.call(this,d)};e.prototype.anchor=function(c){var d=b.anchor.apply(this,arguments),e=this.options.x||0,f=this.options.y||0;d.absolutePosition.x-=e;d.absolutePosition.y-=f;d.relativePosition.x-=e;d.relativePosition.y-=f;return d};e.prototype.position=function(c){var b=this.graphic,m=this.annotation.chart,g=this.points[0],a=this.options,k=c.absolutePosition,t=c.relativePosition;if(c=g.series.visible&&
d.prototype.isInsidePlot.call(g)){if(a.distance)var u=p.prototype.getPosition.call({chart:m,distance:f(a.distance,16)},b.width,b.height,{plotX:t.x,plotY:t.y,negative:g.negative,ttBelow:g.ttBelow,h:t.height||t.width});else a.positioner?u=a.positioner.call(this):(g={x:k.x,y:k.y,width:0,height:0},u=e.alignedPosition(l(a,{width:b.width,height:b.height}),g),"justify"===this.options.overflow&&(u=e.alignedPosition(e.justifiedOptions(m,b,a,u),g)));a.crop&&(a=u.x-m.plotLeft,g=u.y-m.plotTop,c=m.isInsidePlot(a,
g)&&m.isInsidePlot(a+b.width,g+b.height))}return c?u:null};e.attrsMap={backgroundColor:"fill",borderColor:"stroke",borderWidth:"stroke-width",zIndex:"zIndex",borderRadius:"r",padding:"padding"};e.shapesWithoutBackground=["connector"];return e}();n.prototype.symbols.connector=function(c,b,d,f,g){var a=g&&g.anchorX;g=g&&g.anchorY;var k=d/2;if(q(a)&&q(g)){var e=[["M",a,g]];var u=b-g;0>u&&(u=-f-u);u<d&&(k=a<c+d/2?u:d-u);g>b+f?e.push(["L",c+k,b+f]):g<b?e.push(["L",c+k,b]):a<c?e.push(["L",c,b+f/2]):a>c+
d&&e.push(["L",c+d,b+f/2])}return e||[]};return m});q(d,"Extensions/Annotations/Controllables/ControllableImage.js",[d["Extensions/Annotations/Controllables/ControllableLabel.js"],d["Extensions/Annotations/Mixins/ControllableMixin.js"]],function(b,d){return function(){function l(b,l,n){this.addControlPoints=d.addControlPoints;this.anchor=d.anchor;this.attr=d.attr;this.attrsFromOptions=d.attrsFromOptions;this.destroy=d.destroy;this.getPointsOptions=d.getPointsOptions;this.init=d.init;this.linkPoints=
d.linkPoints;this.point=d.point;this.rotate=d.rotate;this.scale=d.scale;this.setControlPointsVisibility=d.setControlPointsVisibility;this.shouldBeDrawn=d.shouldBeDrawn;this.transform=d.transform;this.transformPoint=d.transformPoint;this.translatePoint=d.translatePoint;this.translateShape=d.translateShape;this.update=d.update;this.type="image";this.translate=d.translateShape;this.init(b,l,n);this.collection="shapes"}l.prototype.render=function(b){var l=this.attrsFromOptions(this.options),p=this.options;
this.graphic=this.annotation.chart.renderer.image(p.src,0,-9E9,p.width,p.height).attr(l).add(b);this.graphic.width=p.width;this.graphic.height=p.height;d.render.call(this)};l.prototype.redraw=function(l){var m=this.anchor(this.points[0]);if(m=b.prototype.position.call(this,m))this.graphic[l?"animate":"attr"]({x:m.x,y:m.y});else this.graphic.attr({x:0,y:-9E9});this.graphic.placed=!!m;d.redraw.call(this,l)};l.attrsMap={width:"width",height:"height",zIndex:"zIndex"};return l}()});q(d,"Extensions/Annotations/Annotations.js",
[d["Core/Animation/AnimationUtilities.js"],d["Core/Chart/Chart.js"],d["Extensions/Annotations/Mixins/ControllableMixin.js"],d["Extensions/Annotations/Controllables/ControllableRect.js"],d["Extensions/Annotations/Controllables/ControllableCircle.js"],d["Extensions/Annotations/Controllables/ControllablePath.js"],d["Extensions/Annotations/Controllables/ControllableImage.js"],d["Extensions/Annotations/Controllables/ControllableLabel.js"],d["Extensions/Annotations/ControlPoint.js"],d["Extensions/Annotations/Mixins/EventEmitterMixin.js"],
d["Core/Globals.js"],d["Extensions/Annotations/MockPoint.js"],d["Core/Pointer.js"],d["Core/Utilities.js"]],function(b,d,n,p,m,z,c,q,f,e,r,h,w,g){var a=b.getDeferredAnimation;b=d.prototype;var k=g.addEvent,t=g.defined,u=g.destroyObjectProperties,l=g.erase;d=g.extend;var y=g.find,v=g.fireEvent,x=g.merge,A=g.pick,E=g.splat;g=g.wrap;var C=function(){function b(a,b){this.annotation=void 0;this.coll="annotations";this.shapesGroup=this.labelsGroup=this.labelCollector=this.group=this.graphic=this.animationConfig=
this.collection=void 0;this.chart=a;this.points=[];this.controlPoints=[];this.coll="annotations";this.labels=[];this.shapes=[];this.options=x(this.defaultOptions,b);this.userOptions=b;b=this.getLabelsAndShapesOptions(this.options,b);this.options.labels=b.labels;this.options.shapes=b.shapes;this.init(a,this.options)}b.prototype.init=function(){var b=this.chart,c=this.options.animation;this.linkPoints();this.addControlPoints();this.addShapes();this.addLabels();this.setLabelCollector();this.animationConfig=
a(b,c)};b.prototype.getLabelsAndShapesOptions=function(a,b){var c={};["labels","shapes"].forEach(function(d){a[d]&&(c[d]=E(b[d]).map(function(b,c){return x(a[d][c],b)}))});return c};b.prototype.addShapes=function(){(this.options.shapes||[]).forEach(function(a,b){a=this.initShape(a,b);x(!0,this.options.shapes[b],a.options)},this)};b.prototype.addLabels=function(){(this.options.labels||[]).forEach(function(a,b){a=this.initLabel(a,b);x(!0,this.options.labels[b],a.options)},this)};b.prototype.addClipPaths=
function(){this.setClipAxes();this.clipXAxis&&this.clipYAxis&&(this.clipRect=this.chart.renderer.clipRect(this.getClipBox()))};b.prototype.setClipAxes=function(){var a=this.chart.xAxis,b=this.chart.yAxis,c=(this.options.labels||[]).concat(this.options.shapes||[]).reduce(function(c,d){return[a[d&&d.point&&d.point.xAxis]||c[0],b[d&&d.point&&d.point.yAxis]||c[1]]},[]);this.clipXAxis=c[0];this.clipYAxis=c[1]};b.prototype.getClipBox=function(){if(this.clipXAxis&&this.clipYAxis)return{x:this.clipXAxis.left,
y:this.clipYAxis.top,width:this.clipXAxis.width,height:this.clipYAxis.height}};b.prototype.setLabelCollector=function(){var a=this;a.labelCollector=function(){return a.labels.reduce(function(a,b){b.options.allowOverlap||a.push(b.graphic);return a},[])};a.chart.labelCollectors.push(a.labelCollector)};b.prototype.setOptions=function(a){this.options=x(this.defaultOptions,a)};b.prototype.redraw=function(a){this.linkPoints();this.graphic||this.render();this.clipRect&&this.clipRect.animate(this.getClipBox());
this.redrawItems(this.shapes,a);this.redrawItems(this.labels,a);n.redraw.call(this,a)};b.prototype.redrawItems=function(a,b){for(var c=a.length;c--;)this.redrawItem(a[c],b)};b.prototype.renderItems=function(a){for(var b=a.length;b--;)this.renderItem(a[b])};b.prototype.render=function(){var a=this.chart.renderer;this.graphic=a.g("annotation").attr({opacity:0,zIndex:this.options.zIndex,visibility:this.options.visible?"visible":"hidden"}).add();this.shapesGroup=a.g("annotation-shapes").add(this.graphic).clip(this.chart.plotBoxClip);
this.labelsGroup=a.g("annotation-labels").attr({translateX:0,translateY:0}).add(this.graphic);this.addClipPaths();this.clipRect&&this.graphic.clip(this.clipRect);this.renderItems(this.shapes);this.renderItems(this.labels);this.addEvents();n.render.call(this)};b.prototype.setVisibility=function(a){var b=this.options;a=A(a,!b.visible);this.graphic.attr("visibility",a?"visible":"hidden");a||this.setControlPointsVisibility(!1);b.visible=a};b.prototype.setControlPointsVisibility=function(a){var b=function(b){b.setControlPointsVisibility(a)};
n.setControlPointsVisibility.call(this,a);this.shapes.forEach(b);this.labels.forEach(b)};b.prototype.destroy=function(){var a=this.chart,b=function(a){a.destroy()};this.labels.forEach(b);this.shapes.forEach(b);this.clipYAxis=this.clipXAxis=null;l(a.labelCollectors,this.labelCollector);e.destroy.call(this);n.destroy.call(this);u(this,a)};b.prototype.remove=function(){return this.chart.removeAnnotation(this)};b.prototype.update=function(a,b){var c=this.chart,d=this.getLabelsAndShapesOptions(this.userOptions,
a),k=c.annotations.indexOf(this);a=x(!0,this.userOptions,a);a.labels=d.labels;a.shapes=d.shapes;this.destroy();this.constructor(c,a);c.options.annotations[k]=a;this.isUpdating=!0;A(b,!0)&&c.redraw();v(this,"afterUpdate");this.isUpdating=!1};b.prototype.initShape=function(a,c){a=x(this.options.shapeOptions,{controlPointOptions:this.options.controlPointOptions},a);c=new b.shapesMap[a.type](this,a,c);c.itemType="shape";this.shapes.push(c);return c};b.prototype.initLabel=function(a,b){a=x(this.options.labelOptions,
{controlPointOptions:this.options.controlPointOptions},a);b=new q(this,a,b);b.itemType="label";this.labels.push(b);return b};b.prototype.redrawItem=function(a,b){a.linkPoints();a.shouldBeDrawn()?(a.graphic||this.renderItem(a),a.redraw(A(b,!0)&&a.graphic.placed),a.points.length&&this.adjustVisibility(a)):this.destroyItem(a)};b.prototype.adjustVisibility=function(a){var b=!1,c=a.graphic;a.points.forEach(function(a){!1!==a.series.visible&&!1!==a.visible&&(b=!0)});b?"hidden"===c.visibility&&c.show():
c.hide()};b.prototype.destroyItem=function(a){l(this[a.itemType+"s"],a);a.destroy()};b.prototype.renderItem=function(a){a.render("label"===a.itemType?this.labelsGroup:this.shapesGroup)};b.ControlPoint=f;b.MockPoint=h;b.shapesMap={rect:p,circle:m,path:z,image:c};b.types={};return b}();x(!0,C.prototype,n,e,x(C.prototype,{nonDOMEvents:["add","afterUpdate","drag","remove"],defaultOptions:{visible:!0,animation:{},draggable:"xy",labelOptions:{align:"center",allowOverlap:!1,backgroundColor:"rgba(0, 0, 0, 0.75)",
borderColor:"black",borderRadius:3,borderWidth:1,className:"",crop:!1,formatter:function(){return t(this.y)?this.y:"Annotation label"},includeInDataExport:!0,overflow:"justify",padding:5,shadow:!1,shape:"callout",style:{fontSize:"11px",fontWeight:"normal",color:"contrast"},useHTML:!1,verticalAlign:"bottom",x:0,y:-16},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1,fill:"rgba(0, 0, 0, 0.75)",r:0,snap:2},controlPointOptions:{symbol:"circle",width:10,height:10,style:{stroke:"black","stroke-width":2,
fill:"white"},visible:!1,events:{}},events:{},zIndex:6}}));r.extendAnnotation=function(a,b,c,d){b=b||C;x(!0,a.prototype,b.prototype,c);a.prototype.defaultOptions=x(a.prototype.defaultOptions,d||{})};d(b,{initAnnotation:function(a){a=new (C.types[a.type]||C)(this,a);this.annotations.push(a);return a},addAnnotation:function(a,b){a=this.initAnnotation(a);this.options.annotations.push(a.options);A(b,!0)&&(a.redraw(),a.graphic.attr({opacity:1}));return a},removeAnnotation:function(a){var b=this.annotations,
c="annotations"===a.coll?a:y(b,function(b){return b.options.id===a});c&&(v(c,"remove"),l(this.options.annotations,c.options),l(b,c),c.destroy())},drawAnnotations:function(){this.plotBoxClip.attr(this.plotBox);this.annotations.forEach(function(a){a.redraw();a.graphic.animate({opacity:1},a.animationConfig)})}});b.collectionsWithUpdate.push("annotations");b.collectionsWithInit.annotations=[b.addAnnotation];b.callbacks.push(function(a){a.annotations=[];a.options.annotations||(a.options.annotations=[]);
a.plotBoxClip=this.renderer.clipRect(this.plotBox);a.controlPointsGroup=a.renderer.g("control-points").attr({zIndex:99}).clip(a.plotBoxClip).add();a.options.annotations.forEach(function(b,c){b=a.initAnnotation(b);a.options.annotations[c]=b.options});a.drawAnnotations();k(a,"redraw",a.drawAnnotations);k(a,"destroy",function(){a.plotBoxClip.destroy();a.controlPointsGroup.destroy()});k(a,"exportData",function(b){var c,d,k,e,f,v,g,u,x=a.annotations,t=(this.options.exporting&&this.options.exporting.csv||
{}).columnHeaderFormatter,A=!b.dataRows[1].xValues,l=null===(d=null===(c=a.options.lang)||void 0===c?void 0:c.exportData)||void 0===d?void 0:d.annotationHeader;c=function(a){if(t){var b=t(a);if(!1!==b)return b}b=l+" "+a;return A?{columnTitle:b,topLevelColumnTitle:b}:b};var E=b.dataRows[0].length,h=null===(f=null===(e=null===(k=a.options.exporting)||void 0===k?void 0:k.csv)||void 0===e?void 0:e.annotations)||void 0===f?void 0:f.itemDelimiter,y=null===(u=null===(g=null===(v=a.options.exporting)||void 0===
v?void 0:v.csv)||void 0===g?void 0:g.annotations)||void 0===u?void 0:u.join;x.forEach(function(a){a.options.labelOptions.includeInDataExport&&a.labels.forEach(function(a){if(a.options.text){var c=a.options.text;a.points.forEach(function(a){var d=a.x,k=a.series.xAxis?a.series.xAxis.options.index:-1,e=!1;if(-1===k){a=b.dataRows[0].length;for(var f=Array(a),v=0;v<a;++v)f[v]="";f.push(c);f.xValues=[];f.xValues[k]=d;b.dataRows.push(f);e=!0}e||b.dataRows.forEach(function(a,b){!e&&a.xValues&&void 0!==k&&
d===a.xValues[k]&&(y&&a.length>E?a[a.length-1]+=h+c:a.push(c),e=!0)});if(!e){a=b.dataRows[0].length;f=Array(a);for(v=0;v<a;++v)f[v]="";f[0]=d;f.push(c);f.xValues=[];void 0!==k&&(f.xValues[k]=d);b.dataRows.push(f)}})}})});var m=0;b.dataRows.forEach(function(a){m=Math.max(m,a.length)});k=m-b.dataRows[0].length;for(e=0;e<k;e++)f=c(e+1),A?(b.dataRows[0].push(f.topLevelColumnTitle),b.dataRows[1].push(f.columnTitle)):b.dataRows[0].push(f)})});g(w.prototype,"onContainerMouseDown",function(a){this.chart.hasDraggedAnnotation||
a.apply(this,Array.prototype.slice.call(arguments,1))});return r.Annotation=C});q(d,"Mixins/Navigation.js",[],function(){return{initUpdate:function(b){b.navigation||(b.navigation={updates:[],update:function(b,d){this.updates.forEach(function(l){l.update.call(l.context,b,d)})}})},addUpdate:function(b,d){d.navigation||this.initUpdate(d);d.navigation.updates.push({update:b,context:d})}}});q(d,"Extensions/Annotations/NavigationBindings.js",[d["Extensions/Annotations/Annotations.js"],d["Core/Chart/Chart.js"],
d["Mixins/Navigation.js"],d["Core/Globals.js"],d["Core/Utilities.js"]],function(b,d,n,p,m){function l(b){var c=b.prototype.defaultOptions.events&&b.prototype.defaultOptions.events.click;a(!0,b.prototype.defaultOptions.events,{click:function(a){var b=this,d=b.chart.navigationBindings,k=d.activeAnnotation;c&&c.call(b,a);k!==b?(d.deselectAnnotation(),d.activeAnnotation=b,b.setControlPointsVisibility(!0),e(d,"showPopup",{annotation:b,formType:"annotation-toolbar",options:d.annotationToFields(b),onSubmit:function(a){var c=
{};"remove"===a.actionType?(d.activeAnnotation=!1,d.chart.removeAnnotation(b)):(d.fieldsToOptions(a.fields,c),d.deselectAnnotation(),a=c.typeOptions,"measure"===b.options.type&&(a.crosshairY.enabled=0!==a.crosshairY.strokeWidth,a.crosshairX.enabled=0!==a.crosshairX.strokeWidth),b.update(c))}})):(d.deselectAnnotation(),e(d,"closePopup"));a.activeAnnotation=!0}})}var c=m.addEvent,q=m.attr,f=m.format,e=m.fireEvent,r=m.isArray,h=m.isFunction,w=m.isNumber,g=m.isObject,a=m.merge,k=m.objectEach,t=m.pick;
m=m.setOptions;var u=p.doc,F=p.win,y=function(){function b(a,b){this.selectedButton=this.boundClassNames=void 0;this.chart=a;this.options=b;this.eventsToUnbind=[];this.container=u.getElementsByClassName(this.options.bindingsClassName||"")}b.prototype.initEvents=function(){var a=this,b=a.chart,d=a.container,e=a.options;a.boundClassNames={};k(e.bindings||{},function(b){a.boundClassNames[b.className]=b});[].forEach.call(d,function(b){a.eventsToUnbind.push(c(b,"click",function(c){var d=a.getButtonEvents(b,
c);d&&a.bindingsButtonClick(d.button,d.events,c)}))});k(e.events||{},function(b,d){h(b)&&a.eventsToUnbind.push(c(a,d,b))});a.eventsToUnbind.push(c(b.container,"click",function(c){!b.cancelClick&&b.isInsidePlot(c.chartX-b.plotLeft,c.chartY-b.plotTop)&&a.bindingsChartClick(this,c)}));a.eventsToUnbind.push(c(b.container,p.isTouchDevice?"touchmove":"mousemove",function(b){a.bindingsContainerMouseMove(this,b)}))};b.prototype.initUpdate=function(){var a=this;n.addUpdate(function(b){a.update(b)},this.chart)};
b.prototype.bindingsButtonClick=function(a,b,c){var d=this.chart;this.selectedButtonElement&&(e(this,"deselectButton",{button:this.selectedButtonElement}),this.nextEvent&&(this.currentUserDetails&&"annotations"===this.currentUserDetails.coll&&d.removeAnnotation(this.currentUserDetails),this.mouseMoveEvent=this.nextEvent=!1));this.selectedButton=b;this.selectedButtonElement=a;e(this,"selectButton",{button:a});b.init&&b.init.call(this,a,c);(b.start||b.steps)&&d.renderer.boxWrapper.addClass("highcharts-draw-mode")};
b.prototype.bindingsChartClick=function(a,b){a=this.chart;var c=this.selectedButton;a=a.renderer.boxWrapper;var d;if(d=this.activeAnnotation&&!b.activeAnnotation&&b.target.parentNode){a:{d=b.target;var k=F.Element.prototype,f=k.matches||k.msMatchesSelector||k.webkitMatchesSelector,g=null;if(k.closest)g=k.closest.call(d,".highcharts-popup");else{do{if(f.call(d,".highcharts-popup"))break a;d=d.parentElement||d.parentNode}while(null!==d&&1===d.nodeType)}d=g}d=!d}d&&(e(this,"closePopup"),this.deselectAnnotation());
c&&c.start&&(this.nextEvent?(this.nextEvent(b,this.currentUserDetails),this.steps&&(this.stepIndex++,c.steps[this.stepIndex]?this.mouseMoveEvent=this.nextEvent=c.steps[this.stepIndex]:(e(this,"deselectButton",{button:this.selectedButtonElement}),a.removeClass("highcharts-draw-mode"),c.end&&c.end.call(this,b,this.currentUserDetails),this.mouseMoveEvent=this.nextEvent=!1,this.selectedButton=null))):(this.currentUserDetails=c.start.call(this,b),c.steps?(this.stepIndex=0,this.steps=!0,this.mouseMoveEvent=
this.nextEvent=c.steps[this.stepIndex]):(e(this,"deselectButton",{button:this.selectedButtonElement}),a.removeClass("highcharts-draw-mode"),this.steps=!1,this.selectedButton=null,c.end&&c.end.call(this,b,this.currentUserDetails))))};b.prototype.bindingsContainerMouseMove=function(a,b){this.mouseMoveEvent&&this.mouseMoveEvent(b,this.currentUserDetails)};b.prototype.fieldsToOptions=function(a,b){k(a,function(a,c){var d=parseFloat(a),k=c.split("."),e=b,f=k.length-1;!w(d)||a.match(/px/g)||c.match(/format/g)||
(a=d);""!==a&&"undefined"!==a&&k.forEach(function(b,c){var d=t(k[c+1],"");f===c?e[b]=a:(e[b]||(e[b]=d.match(/\d/g)?[]:{}),e=e[b])})});return b};b.prototype.deselectAnnotation=function(){this.activeAnnotation&&(this.activeAnnotation.setControlPointsVisibility(!1),this.activeAnnotation=!1)};b.prototype.annotationToFields=function(a){function c(b,d,e,t){if(e&&b&&-1===l.indexOf(d)&&(0<=(e.indexOf&&e.indexOf(d))||e[d]||!0===e))if(r(b))t[d]=[],b.forEach(function(a,b){g(a)?(t[d][b]={},k(a,function(a,k){c(a,
k,u[d],t[d][b])})):c(a,0,u[d],t[d])});else if(g(b)){var h={};r(t)?(t.push(h),h[d]={},h=h[d]):t[d]=h;k(b,function(a,b){c(a,b,0===d?e:u[d],h)})}else"format"===d?t[d]=[f(b,a.labels[0].points[0]).toString(),"text"]:r(t)?t.push([b,v(b)]):t[d]=[b,v(b)]}var d=a.options,e=b.annotationsEditable,u=e.nestedOptions,v=this.utils.getFieldType,h=t(d.type,d.shapes&&d.shapes[0]&&d.shapes[0].type,d.labels&&d.labels[0]&&d.labels[0].itemType,"label"),l=b.annotationsNonEditable[d.langKey]||[],y={langKey:d.langKey,type:h};
k(d,function(a,b){"typeOptions"===b?(y[b]={},k(d[b],function(a,d){c(a,d,u,y[b],!0)})):c(a,b,e[h],y)});return y};b.prototype.getClickedClassNames=function(a,b){var c=b.target;b=[];for(var d;c&&((d=q(c,"class"))&&(b=b.concat(d.split(" ").map(function(a){return[a,c]}))),c=c.parentNode,c!==a););return b};b.prototype.getButtonEvents=function(a,b){var c=this,d;this.getClickedClassNames(a,b).forEach(function(a){c.boundClassNames[a[0]]&&!d&&(d={events:c.boundClassNames[a[0]],button:a[1]})});return d};b.prototype.update=
function(b){this.options=a(!0,this.options,b);this.removeEvents();this.initEvents()};b.prototype.removeEvents=function(){this.eventsToUnbind.forEach(function(a){a()})};b.prototype.destroy=function(){this.removeEvents()};b.annotationsEditable={nestedOptions:{labelOptions:["style","format","backgroundColor"],labels:["style"],label:["style"],style:["fontSize","color"],background:["fill","strokeWidth","stroke"],innerBackground:["fill","strokeWidth","stroke"],outerBackground:["fill","strokeWidth","stroke"],
shapeOptions:["fill","strokeWidth","stroke"],shapes:["fill","strokeWidth","stroke"],line:["strokeWidth","stroke"],backgroundColors:[!0],connector:["fill","strokeWidth","stroke"],crosshairX:["strokeWidth","stroke"],crosshairY:["strokeWidth","stroke"]},circle:["shapes"],verticalLine:[],label:["labelOptions"],measure:["background","crosshairY","crosshairX"],fibonacci:[],tunnel:["background","line","height"],pitchfork:["innerBackground","outerBackground"],rect:["shapes"],crookedLine:[],basicAnnotation:["shapes",
"labelOptions"]};b.annotationsNonEditable={rectangle:["crosshairX","crosshairY","label"]};return b}();y.prototype.utils={updateRectSize:function(a,b){var c=b.chart,d=b.options.typeOptions,k=c.pointer.getCoordinates(a);a=k.xAxis[0].value-d.point.x;d=d.point.y-k.yAxis[0].value;b.update({typeOptions:{background:{width:c.inverted?d:a,height:c.inverted?a:d}}})},getFieldType:function(a){return{string:"text",number:"number","boolean":"checkbox"}[typeof a]}};d.prototype.initNavigationBindings=function(){var a=
this.options;a&&a.navigation&&a.navigation.bindings&&(this.navigationBindings=new y(this,a.navigation),this.navigationBindings.initEvents(),this.navigationBindings.initUpdate())};c(d,"load",function(){this.initNavigationBindings()});c(d,"destroy",function(){this.navigationBindings&&this.navigationBindings.destroy()});c(y,"deselectButton",function(){this.selectedButtonElement=null});c(b,"remove",function(){this.chart.navigationBindings&&this.chart.navigationBindings.deselectAnnotation()});p.Annotation&&
(l(b),k(b.types,function(a){l(a)}));m({lang:{navigation:{popup:{simpleShapes:"Simple shapes",lines:"Lines",circle:"Circle",rectangle:"Rectangle",label:"Label",shapeOptions:"Shape options",typeOptions:"Details",fill:"Fill",format:"Text",strokeWidth:"Line width",stroke:"Line color",title:"Title",name:"Name",labelOptions:"Label options",labels:"Labels",backgroundColor:"Background color",backgroundColors:"Background colors",borderColor:"Border color",borderRadius:"Border radius",borderWidth:"Border width",
style:"Style",padding:"Padding",fontSize:"Font size",color:"Color",height:"Height",shapes:"Shape options"}}},navigation:{bindingsClassName:"highcharts-bindings-container",bindings:{circleAnnotation:{className:"highcharts-circle-annotation",start:function(b){b=this.chart.pointer.getCoordinates(b);var c=this.chart.options.navigation;return this.chart.addAnnotation(a({langKey:"circle",type:"basicAnnotation",shapes:[{type:"circle",point:{xAxis:0,yAxis:0,x:b.xAxis[0].value,y:b.yAxis[0].value},r:5}]},c.annotationsOptions,
c.bindings.circleAnnotation.annotationsOptions))},steps:[function(a,b){var c=b.options.shapes[0].point,d=this.chart.xAxis[0].toPixels(c.x);c=this.chart.yAxis[0].toPixels(c.y);var k=this.chart.inverted;b.update({shapes:[{r:Math.max(Math.sqrt(Math.pow(k?c-a.chartX:d-a.chartX,2)+Math.pow(k?d-a.chartY:c-a.chartY,2)),5)}]})}]},rectangleAnnotation:{className:"highcharts-rectangle-annotation",start:function(b){var c=this.chart.pointer.getCoordinates(b);b=this.chart.options.navigation;var d=c.xAxis[0].value;
c=c.yAxis[0].value;return this.chart.addAnnotation(a({langKey:"rectangle",type:"basicAnnotation",shapes:[{type:"path",points:[{xAxis:0,yAxis:0,x:d,y:c},{xAxis:0,yAxis:0,x:d,y:c},{xAxis:0,yAxis:0,x:d,y:c},{xAxis:0,yAxis:0,x:d,y:c}]}]},b.annotationsOptions,b.bindings.rectangleAnnotation.annotationsOptions))},steps:[function(a,b){var c=b.options.shapes[0].points,d=this.chart.pointer.getCoordinates(a);a=d.xAxis[0].value;d=d.yAxis[0].value;c[1].x=a;c[2].x=a;c[2].y=d;c[3].y=d;b.update({shapes:[{points:c}]})}]},
labelAnnotation:{className:"highcharts-label-annotation",start:function(b){b=this.chart.pointer.getCoordinates(b);var c=this.chart.options.navigation;return this.chart.addAnnotation(a({langKey:"label",type:"basicAnnotation",labelOptions:{format:"{y:.2f}"},labels:[{point:{xAxis:0,yAxis:0,x:b.xAxis[0].value,y:b.yAxis[0].value},overflow:"none",crop:!0}]},c.annotationsOptions,c.bindings.labelAnnotation.annotationsOptions))}}},events:{},annotationsOptions:{animation:{defer:0}}}});return y});q(d,"Stock/StockToolsBindings.js",
[d["Core/Globals.js"],d["Extensions/Annotations/NavigationBindings.js"],d["Core/Utilities.js"]],function(b,d,n){var l=n.correctFloat,m=n.defined,q=n.extend,c=n.fireEvent,D=n.getOptions,f=n.isNumber,e=n.merge,r=n.pick,h=n.setOptions,B=n.uniqueKey,g=d.prototype.utils;g.addFlagFromForm=function(a){return function(b){var d=this,k=d.chart,e=k.stockTools,f=g.getFieldType;b=g.attractToPoint(b,k);var h={type:"flags",onSeries:b.series.id,shape:a,data:[{x:b.x,y:b.y}],point:{events:{click:function(){var a=this,
b=a.options;c(d,"showPopup",{point:a,formType:"annotation-toolbar",options:{langKey:"flags",type:"flags",title:[b.title,f(b.title)],name:[b.name,f(b.name)]},onSubmit:function(b){"remove"===b.actionType?a.remove():a.update(d.fieldsToOptions(b.fields,{}))}})}}}};e&&e.guiEnabled||k.addSeries(h);c(d,"showPopup",{formType:"flag",options:{langKey:"flags",type:"flags",title:["A",f("A")],name:["Flag A",f("Flag A")]},onSubmit:function(a){d.fieldsToOptions(a.fields,h.data[0]);k.addSeries(h)}})}};g.manageIndicators=
function(a){var b=this.chart,d={linkedTo:a.linkedTo,type:a.type},e=["ad","cmf","mfi","vbp","vwap"],f="ad atr cci cmf macd mfi roc rsi ao aroon aroonoscillator trix apo dpo ppo natr williamsr stochastic slowstochastic linearRegression linearRegressionSlope linearRegressionIntercept linearRegressionAngle".split(" ");if("edit"===a.actionType)this.fieldsToOptions(a.fields,d),(a=b.get(a.seriesId))&&a.update(d,!1);else if("remove"===a.actionType){if(a=b.get(a.seriesId)){var g=a.yAxis;a.linkedSeries&&a.linkedSeries.forEach(function(a){a.remove(!1)});
a.remove(!1);0<=f.indexOf(a.type)&&(g.remove(!1),this.resizeYAxes())}}else{d.id=B();this.fieldsToOptions(a.fields,d);var h=b.get(d.linkedTo);var l=D().plotOptions;"undefined"!==typeof h&&h instanceof w.Series&&"sum"===h.getDGApproximation()&&!m(l&&l[d.type]&&(null===(g=l.dataGrouping)||void 0===g?void 0:g.approximation))&&(d.dataGrouping={approximation:"sum"});0<=f.indexOf(a.type)?(g=b.addAxis({id:B(),offset:0,opposite:!0,title:{text:""},tickPixelInterval:40,showLastLabel:!1,labels:{align:"left",
y:-2}},!1,!1),d.yAxis=g.options.id,this.resizeYAxes()):d.yAxis=b.get(a.linkedTo).options.yAxis;0<=e.indexOf(a.type)&&(d.params.volumeSeriesID=b.series.filter(function(a){return"column"===a.options.type})[0].options.id);b.addSeries(d,!1)}c(this,"deselectButton",{button:this.selectedButtonElement});b.redraw()};g.updateHeight=function(a,b){b.update({typeOptions:{height:this.chart.pointer.getCoordinates(a).yAxis[0].value-b.options.typeOptions.points[1].y}})};g.attractToPoint=function(a,b){a=b.pointer.getCoordinates(a);
var c=a.xAxis[0].value;a=a.yAxis[0].value;var d=Number.MAX_VALUE,k;b.series.forEach(function(a){a.points.forEach(function(a){a&&d>Math.abs(a.x-c)&&(d=Math.abs(a.x-c),k=a)})});return{x:k.x,y:k.y,below:a<k.y,series:k.series,xAxis:k.series.xAxis.index||0,yAxis:k.series.yAxis.index||0}};g.isNotNavigatorYAxis=function(a){return"highcharts-navigator-yaxis"!==a.userOptions.className};g.updateNthPoint=function(a){return function(b,c){var d=c.options.typeOptions;b=this.chart.pointer.getCoordinates(b);var k=
b.xAxis[0].value,e=b.yAxis[0].value;d.points.forEach(function(b,c){c>=a&&(b.x=k,b.y=e)});c.update({typeOptions:{points:d.points}})}};q(d.prototype,{getYAxisPositions:function(a,b,c){function d(a){return m(a)&&!f(a)&&a.match("%")}var k=0;a=a.map(function(a){var e=d(a.options.height)?parseFloat(a.options.height)/100:a.height/b;a=d(a.options.top)?parseFloat(a.options.top)/100:l(a.top-a.chart.plotTop)/b;f(e)||(e=c/100);k=l(k+e);return{height:100*e,top:100*a}});a.allAxesHeight=k;return a},getYAxisResizers:function(a){var b=
[];a.forEach(function(c,d){c=a[d+1];b[d]=c?{enabled:!0,controlledAxis:{next:[r(c.options.id,c.options.index)]}}:{enabled:!1}});return b},resizeYAxes:function(a){a=a||20;var b=this.chart,c=b.yAxis.filter(g.isNotNavigatorYAxis),d=c.length;b=this.getYAxisPositions(c,b.plotHeight,a);var e=this.getYAxisResizers(c),f=b.allAxesHeight,h=a;1<f?(6>d?(b[0].height=l(b[0].height-h),b=this.recalculateYAxisPositions(b,h)):(a=100/d,b=this.recalculateYAxisPositions(b,a/(d-1),!0,-1)),b[d-1]={top:l(100-a),height:a}):
(h=100*l(1-f),5>d?(b[0].height=l(b[0].height+h),b=this.recalculateYAxisPositions(b,h)):b=this.recalculateYAxisPositions(b,h/d,!0,1));b.forEach(function(a,b){c[b].update({height:a.height+"%",top:a.top+"%",resize:e[b]},!1)})},recalculateYAxisPositions:function(a,b,c,d){a.forEach(function(e,k){k=a[k-1];e.top=k?l(k.height+k.top):0;c&&(e.height=l(e.height+d*b))});return a}});n={segment:{className:"highcharts-segment",start:function(a){a=this.chart.pointer.getCoordinates(a);var b=this.chart.options.navigation;
a=e({langKey:"segment",type:"crookedLine",typeOptions:{points:[{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value}]}},b.annotationsOptions,b.bindings.segment.annotationsOptions);return this.chart.addAnnotation(a)},steps:[g.updateNthPoint(1)]},arrowSegment:{className:"highcharts-arrow-segment",start:function(a){a=this.chart.pointer.getCoordinates(a);var b=this.chart.options.navigation;a=e({langKey:"arrowSegment",type:"crookedLine",typeOptions:{line:{markerEnd:"arrow"},points:[{x:a.xAxis[0].value,
y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value}]}},b.annotationsOptions,b.bindings.arrowSegment.annotationsOptions);return this.chart.addAnnotation(a)},steps:[g.updateNthPoint(1)]},ray:{className:"highcharts-ray",start:function(a){a=this.chart.pointer.getCoordinates(a);var b=this.chart.options.navigation;a=e({langKey:"ray",type:"crookedLine",typeOptions:{type:"ray",points:[{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value}]}},b.annotationsOptions,b.bindings.ray.annotationsOptions);
return this.chart.addAnnotation(a)},steps:[g.updateNthPoint(1)]},arrowRay:{className:"highcharts-arrow-ray",start:function(a){a=this.chart.pointer.getCoordinates(a);var b=this.chart.options.navigation;a=e({langKey:"arrowRay",type:"infinityLine",typeOptions:{type:"ray",line:{markerEnd:"arrow"},points:[{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value}]}},b.annotationsOptions,b.bindings.arrowRay.annotationsOptions);return this.chart.addAnnotation(a)},steps:[g.updateNthPoint(1)]},
infinityLine:{className:"highcharts-infinity-line",start:function(a){a=this.chart.pointer.getCoordinates(a);var b=this.chart.options.navigation;a=e({langKey:"infinityLine",type:"infinityLine",typeOptions:{type:"line",points:[{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value}]}},b.annotationsOptions,b.bindings.infinityLine.annotationsOptions);return this.chart.addAnnotation(a)},steps:[g.updateNthPoint(1)]},arrowInfinityLine:{className:"highcharts-arrow-infinity-line",start:function(a){a=
this.chart.pointer.getCoordinates(a);var b=this.chart.options.navigation;a=e({langKey:"arrowInfinityLine",type:"infinityLine",typeOptions:{type:"line",line:{markerEnd:"arrow"},points:[{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value}]}},b.annotationsOptions,b.bindings.arrowInfinityLine.annotationsOptions);return this.chart.addAnnotation(a)},steps:[g.updateNthPoint(1)]},horizontalLine:{className:"highcharts-horizontal-line",start:function(a){a=this.chart.pointer.getCoordinates(a);
var b=this.chart.options.navigation;a=e({langKey:"horizontalLine",type:"infinityLine",draggable:"y",typeOptions:{type:"horizontalLine",points:[{x:a.xAxis[0].value,y:a.yAxis[0].value}]}},b.annotationsOptions,b.bindings.horizontalLine.annotationsOptions);this.chart.addAnnotation(a)}},verticalLine:{className:"highcharts-vertical-line",start:function(a){a=this.chart.pointer.getCoordinates(a);var b=this.chart.options.navigation;a=e({langKey:"verticalLine",type:"infinityLine",draggable:"x",typeOptions:{type:"verticalLine",
points:[{x:a.xAxis[0].value,y:a.yAxis[0].value}]}},b.annotationsOptions,b.bindings.verticalLine.annotationsOptions);this.chart.addAnnotation(a)}},crooked3:{className:"highcharts-crooked3",start:function(a){a=this.chart.pointer.getCoordinates(a);var b=this.chart.options.navigation;a=e({langKey:"crooked3",type:"crookedLine",typeOptions:{points:[{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value}]}},b.annotationsOptions,b.bindings.crooked3.annotationsOptions);
return this.chart.addAnnotation(a)},steps:[g.updateNthPoint(1),g.updateNthPoint(2)]},crooked5:{className:"highcharts-crooked5",start:function(a){a=this.chart.pointer.getCoordinates(a);var b=this.chart.options.navigation;a=e({langKey:"crookedLine",type:"crookedLine",typeOptions:{points:[{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value}]}},b.annotationsOptions,
b.bindings.crooked5.annotationsOptions);return this.chart.addAnnotation(a)},steps:[g.updateNthPoint(1),g.updateNthPoint(2),g.updateNthPoint(3),g.updateNthPoint(4)]},elliott3:{className:"highcharts-elliott3",start:function(a){a=this.chart.pointer.getCoordinates(a);var b=this.chart.options.navigation;a=e({langKey:"elliott3",type:"elliottWave",typeOptions:{points:[{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,
y:a.yAxis[0].value}]},labelOptions:{style:{color:"#666666"}}},b.annotationsOptions,b.bindings.elliott3.annotationsOptions);return this.chart.addAnnotation(a)},steps:[g.updateNthPoint(1),g.updateNthPoint(2),g.updateNthPoint(3)]},elliott5:{className:"highcharts-elliott5",start:function(a){a=this.chart.pointer.getCoordinates(a);var b=this.chart.options.navigation;a=e({langKey:"elliott5",type:"elliottWave",typeOptions:{points:[{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value},
{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value}]},labelOptions:{style:{color:"#666666"}}},b.annotationsOptions,b.bindings.elliott5.annotationsOptions);return this.chart.addAnnotation(a)},steps:[g.updateNthPoint(1),g.updateNthPoint(2),g.updateNthPoint(3),g.updateNthPoint(4),g.updateNthPoint(5)]},measureX:{className:"highcharts-measure-x",start:function(a){a=this.chart.pointer.getCoordinates(a);
var b=this.chart.options.navigation;a=e({langKey:"measure",type:"measure",typeOptions:{selectType:"x",point:{x:a.xAxis[0].value,y:a.yAxis[0].value,xAxis:0,yAxis:0},crosshairX:{strokeWidth:1,stroke:"#000000"},crosshairY:{enabled:!1,strokeWidth:0,stroke:"#000000"},background:{width:0,height:0,strokeWidth:0,stroke:"#ffffff"}},labelOptions:{style:{color:"#666666"}}},b.annotationsOptions,b.bindings.measureX.annotationsOptions);return this.chart.addAnnotation(a)},steps:[g.updateRectSize]},measureY:{className:"highcharts-measure-y",
start:function(a){a=this.chart.pointer.getCoordinates(a);var b=this.chart.options.navigation;a=e({langKey:"measure",type:"measure",typeOptions:{selectType:"y",point:{x:a.xAxis[0].value,y:a.yAxis[0].value,xAxis:0,yAxis:0},crosshairX:{enabled:!1,strokeWidth:0,stroke:"#000000"},crosshairY:{strokeWidth:1,stroke:"#000000"},background:{width:0,height:0,strokeWidth:0,stroke:"#ffffff"}},labelOptions:{style:{color:"#666666"}}},b.annotationsOptions,b.bindings.measureY.annotationsOptions);return this.chart.addAnnotation(a)},
steps:[g.updateRectSize]},measureXY:{className:"highcharts-measure-xy",start:function(a){a=this.chart.pointer.getCoordinates(a);var b=this.chart.options.navigation;a=e({langKey:"measure",type:"measure",typeOptions:{selectType:"xy",point:{x:a.xAxis[0].value,y:a.yAxis[0].value,xAxis:0,yAxis:0},background:{width:0,height:0,strokeWidth:10},crosshairX:{strokeWidth:1,stroke:"#000000"},crosshairY:{strokeWidth:1,stroke:"#000000"}},labelOptions:{style:{color:"#666666"}}},b.annotationsOptions,b.bindings.measureXY.annotationsOptions);
return this.chart.addAnnotation(a)},steps:[g.updateRectSize]},fibonacci:{className:"highcharts-fibonacci",start:function(a){a=this.chart.pointer.getCoordinates(a);var b=this.chart.options.navigation;a=e({langKey:"fibonacci",type:"fibonacci",typeOptions:{points:[{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value}]},labelOptions:{style:{color:"#666666"}}},b.annotationsOptions,b.bindings.fibonacci.annotationsOptions);return this.chart.addAnnotation(a)},steps:[g.updateNthPoint(1),
g.updateHeight]},parallelChannel:{className:"highcharts-parallel-channel",start:function(a){a=this.chart.pointer.getCoordinates(a);var b=this.chart.options.navigation;a=e({langKey:"parallelChannel",type:"tunnel",typeOptions:{points:[{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value}]}},b.annotationsOptions,b.bindings.parallelChannel.annotationsOptions);return this.chart.addAnnotation(a)},steps:[g.updateNthPoint(1),g.updateHeight]},pitchfork:{className:"highcharts-pitchfork",
start:function(a){a=this.chart.pointer.getCoordinates(a);var b=this.chart.options.navigation;a=e({langKey:"pitchfork",type:"pitchfork",typeOptions:{points:[{x:a.xAxis[0].value,y:a.yAxis[0].value,controlPoint:{style:{fill:"red"}}},{x:a.xAxis[0].value,y:a.yAxis[0].value},{x:a.xAxis[0].value,y:a.yAxis[0].value}],innerBackground:{fill:"rgba(100, 170, 255, 0.8)"}},shapeOptions:{strokeWidth:2}},b.annotationsOptions,b.bindings.pitchfork.annotationsOptions);return this.chart.addAnnotation(a)},steps:[g.updateNthPoint(1),
g.updateNthPoint(2)]},verticalCounter:{className:"highcharts-vertical-counter",start:function(a){a=g.attractToPoint(a,this.chart);var b=this.chart.options.navigation,c=m(this.verticalCounter)?this.verticalCounter:0;a=e({langKey:"verticalCounter",type:"verticalLine",typeOptions:{point:{x:a.x,y:a.y,xAxis:a.xAxis,yAxis:a.yAxis},label:{offset:a.below?40:-40,text:c.toString()}},labelOptions:{style:{color:"#666666",fontSize:"11px"}},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1}},b.annotationsOptions,
b.bindings.verticalCounter.annotationsOptions);a=this.chart.addAnnotation(a);a.options.events.click.call(a,{})}},verticalLabel:{className:"highcharts-vertical-label",start:function(a){a=g.attractToPoint(a,this.chart);var b=this.chart.options.navigation;a=e({langKey:"verticalLabel",type:"verticalLine",typeOptions:{point:{x:a.x,y:a.y,xAxis:a.xAxis,yAxis:a.yAxis},label:{offset:a.below?40:-40}},labelOptions:{style:{color:"#666666",fontSize:"11px"}},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1}},
b.annotationsOptions,b.bindings.verticalLabel.annotationsOptions);a=this.chart.addAnnotation(a);a.options.events.click.call(a,{})}},verticalArrow:{className:"highcharts-vertical-arrow",start:function(a){a=g.attractToPoint(a,this.chart);var b=this.chart.options.navigation;a=e({langKey:"verticalArrow",type:"verticalLine",typeOptions:{point:{x:a.x,y:a.y,xAxis:a.xAxis,yAxis:a.yAxis},label:{offset:a.below?40:-40,format:" "},connector:{fill:"none",stroke:a.below?"red":"green"}},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",
strokeWidth:1}},b.annotationsOptions,b.bindings.verticalArrow.annotationsOptions);a=this.chart.addAnnotation(a);a.options.events.click.call(a,{})}},flagCirclepin:{className:"highcharts-flag-circlepin",start:g.addFlagFromForm("circlepin")},flagDiamondpin:{className:"highcharts-flag-diamondpin",start:g.addFlagFromForm("flag")},flagSquarepin:{className:"highcharts-flag-squarepin",start:g.addFlagFromForm("squarepin")},flagSimplepin:{className:"highcharts-flag-simplepin",start:g.addFlagFromForm("nopin")},
zoomX:{className:"highcharts-zoom-x",init:function(a){this.chart.update({chart:{zoomType:"x"}});c(this,"deselectButton",{button:a})}},zoomY:{className:"highcharts-zoom-y",init:function(a){this.chart.update({chart:{zoomType:"y"}});c(this,"deselectButton",{button:a})}},zoomXY:{className:"highcharts-zoom-xy",init:function(a){this.chart.update({chart:{zoomType:"xy"}});c(this,"deselectButton",{button:a})}},seriesTypeLine:{className:"highcharts-series-type-line",init:function(a){this.chart.series[0].update({type:"line",
useOhlcData:!0});c(this,"deselectButton",{button:a})}},seriesTypeOhlc:{className:"highcharts-series-type-ohlc",init:function(a){this.chart.series[0].update({type:"ohlc"});c(this,"deselectButton",{button:a})}},seriesTypeCandlestick:{className:"highcharts-series-type-candlestick",init:function(a){this.chart.series[0].update({type:"candlestick"});c(this,"deselectButton",{button:a})}},fullScreen:{className:"highcharts-full-screen",init:function(a){this.chart.fullscreen.toggle();c(this,"deselectButton",
{button:a})}},currentPriceIndicator:{className:"highcharts-current-price-indicator",init:function(a){var b=this.chart,d=b.series[0],e=d.options,f=e.lastVisiblePrice&&e.lastVisiblePrice.enabled;e=e.lastPrice&&e.lastPrice.enabled;b=b.stockTools;var g=b.getIconsURL();b&&b.guiEnabled&&(a.firstChild.style["background-image"]=e?'url("'+g+'current-price-show.svg")':'url("'+g+'current-price-hide.svg")');d.update({lastPrice:{enabled:!e,color:"red"},lastVisiblePrice:{enabled:!f,label:{enabled:!0}}});c(this,
"deselectButton",{button:a})}},indicators:{className:"highcharts-indicators",init:function(){var a=this;c(a,"showPopup",{formType:"indicators",options:{},onSubmit:function(b){a.utils.manageIndicators.call(a,b)}})}},toggleAnnotations:{className:"highcharts-toggle-annotations",init:function(a){var b=this.chart,d=b.stockTools,e=d.getIconsURL();this.toggledAnnotations=!this.toggledAnnotations;(b.annotations||[]).forEach(function(a){a.setVisibility(!this.toggledAnnotations)},this);d&&d.guiEnabled&&(a.firstChild.style["background-image"]=
this.toggledAnnotations?'url("'+e+'annotations-hidden.svg")':'url("'+e+'annotations-visible.svg")');c(this,"deselectButton",{button:a})}},saveChart:{className:"highcharts-save-chart",init:function(a){var d=this.chart,e=[],f=[],h=[],l=[];d.annotations.forEach(function(a,b){e[b]=a.userOptions});d.series.forEach(function(a){a.is("sma")?f.push(a.userOptions):"flags"===a.type&&h.push(a.userOptions)});d.yAxis.forEach(function(a){g.isNotNavigatorYAxis(a)&&l.push(a.options)});b.win.localStorage.setItem("highcharts-chart",
JSON.stringify({annotations:e,indicators:f,flags:h,yAxes:l}));c(this,"deselectButton",{button:a})}}};h({navigation:{bindings:n}});d.prototype.utils=e(g,d.prototype.utils)});q(d,"Stock/StockToolsGui.js",[d["Core/Chart/Chart.js"],d["Core/Globals.js"],d["Extensions/Annotations/NavigationBindings.js"],d["Core/Utilities.js"]],function(b,d,n,p){var l=p.addEvent,q=p.createElement,c=p.css,w=p.extend,f=p.fireEvent,e=p.getStyle,r=p.isArray,h=p.merge,B=p.pick;p=p.setOptions;p({lang:{stockTools:{gui:{simpleShapes:"Simple shapes",
lines:"Lines",crookedLines:"Crooked lines",measure:"Measure",advanced:"Advanced",toggleAnnotations:"Toggle annotations",verticalLabels:"Vertical labels",flags:"Flags",zoomChange:"Zoom change",typeChange:"Type change",saveChart:"Save chart",indicators:"Indicators",currentPriceIndicator:"Current Price Indicators",zoomX:"Zoom X",zoomY:"Zoom Y",zoomXY:"Zooom XY",fullScreen:"Fullscreen",typeOHLC:"OHLC",typeLine:"Line",typeCandlestick:"Candlestick",circle:"Circle",label:"Label",rectangle:"Rectangle",flagCirclepin:"Flag circle",
flagDiamondpin:"Flag diamond",flagSquarepin:"Flag square",flagSimplepin:"Flag simple",measureXY:"Measure XY",measureX:"Measure X",measureY:"Measure Y",segment:"Segment",arrowSegment:"Arrow segment",ray:"Ray",arrowRay:"Arrow ray",line:"Line",arrowLine:"Arrow line",horizontalLine:"Horizontal line",verticalLine:"Vertical line",infinityLine:"Infinity line",crooked3:"Crooked 3 line",crooked5:"Crooked 5 line",elliott3:"Elliott 3 line",elliott5:"Elliott 5 line",verticalCounter:"Vertical counter",verticalLabel:"Vertical label",
verticalArrow:"Vertical arrow",fibonacci:"Fibonacci",pitchfork:"Pitchfork",parallelChannel:"Parallel channel"}},navigation:{popup:{circle:"Circle",rectangle:"Rectangle",label:"Label",segment:"Segment",arrowSegment:"Arrow segment",ray:"Ray",arrowRay:"Arrow ray",line:"Line",arrowLine:"Arrow line",horizontalLine:"Horizontal line",verticalLine:"Vertical line",crooked3:"Crooked 3 line",crooked5:"Crooked 5 line",elliott3:"Elliott 3 line",elliott5:"Elliott 5 line",verticalCounter:"Vertical counter",verticalLabel:"Vertical label",
verticalArrow:"Vertical arrow",fibonacci:"Fibonacci",pitchfork:"Pitchfork",parallelChannel:"Parallel channel",infinityLine:"Infinity line",measure:"Measure",measureXY:"Measure XY",measureX:"Measure X",measureY:"Measure Y",flags:"Flags",addButton:"add",saveButton:"save",editButton:"edit",removeButton:"remove",series:"Series",volume:"Volume",connector:"Connector",innerBackground:"Inner background",outerBackground:"Outer background",crosshairX:"Crosshair X",crosshairY:"Crosshair Y",tunnel:"Tunnel",background:"Background"}}},
stockTools:{gui:{enabled:!0,className:"highcharts-bindings-wrapper",toolbarClassName:"stocktools-toolbar",buttons:"indicators separator simpleShapes lines crookedLines measure advanced toggleAnnotations separator verticalLabels flags separator zoomChange fullScreen typeChange separator currentPriceIndicator saveChart".split(" "),definitions:{separator:{symbol:"separator.svg"},simpleShapes:{items:["label","circle","rectangle"],circle:{symbol:"circle.svg"},rectangle:{symbol:"rectangle.svg"},label:{symbol:"label.svg"}},
flags:{items:["flagCirclepin","flagDiamondpin","flagSquarepin","flagSimplepin"],flagSimplepin:{symbol:"flag-basic.svg"},flagDiamondpin:{symbol:"flag-diamond.svg"},flagSquarepin:{symbol:"flag-trapeze.svg"},flagCirclepin:{symbol:"flag-elipse.svg"}},lines:{items:"segment arrowSegment ray arrowRay line arrowLine horizontalLine verticalLine".split(" "),segment:{symbol:"segment.svg"},arrowSegment:{symbol:"arrow-segment.svg"},ray:{symbol:"ray.svg"},arrowRay:{symbol:"arrow-ray.svg"},line:{symbol:"line.svg"},
arrowLine:{symbol:"arrow-line.svg"},verticalLine:{symbol:"vertical-line.svg"},horizontalLine:{symbol:"horizontal-line.svg"}},crookedLines:{items:["elliott3","elliott5","crooked3","crooked5"],crooked3:{symbol:"crooked-3.svg"},crooked5:{symbol:"crooked-5.svg"},elliott3:{symbol:"elliott-3.svg"},elliott5:{symbol:"elliott-5.svg"}},verticalLabels:{items:["verticalCounter","verticalLabel","verticalArrow"],verticalCounter:{symbol:"vertical-counter.svg"},verticalLabel:{symbol:"vertical-label.svg"},verticalArrow:{symbol:"vertical-arrow.svg"}},
advanced:{items:["fibonacci","pitchfork","parallelChannel"],pitchfork:{symbol:"pitchfork.svg"},fibonacci:{symbol:"fibonacci.svg"},parallelChannel:{symbol:"parallel-channel.svg"}},measure:{items:["measureXY","measureX","measureY"],measureX:{symbol:"measure-x.svg"},measureY:{symbol:"measure-y.svg"},measureXY:{symbol:"measure-xy.svg"}},toggleAnnotations:{symbol:"annotations-visible.svg"},currentPriceIndicator:{symbol:"current-price-show.svg"},indicators:{symbol:"indicators.svg"},zoomChange:{items:["zoomX",
"zoomY","zoomXY"],zoomX:{symbol:"zoom-x.svg"},zoomY:{symbol:"zoom-y.svg"},zoomXY:{symbol:"zoom-xy.svg"}},typeChange:{items:["typeOHLC","typeLine","typeCandlestick"],typeOHLC:{symbol:"series-ohlc.svg"},typeLine:{symbol:"series-line.svg"},typeCandlestick:{symbol:"series-candlestick.svg"}},fullScreen:{symbol:"fullscreen.svg"},saveChart:{symbol:"save-chart.svg"}}}}});l(b,"afterGetContainer",function(){this.setStockTools()});l(b,"getMargins",function(){var a=this.stockTools&&this.stockTools.listWrapper;
(a=a&&(a.startWidth+e(a,"padding-left")+e(a,"padding-right")||a.offsetWidth))&&a<this.plotWidth&&(this.plotLeft+=a)});l(b,"destroy",function(){this.stockTools&&this.stockTools.destroy()});l(b,"redraw",function(){this.stockTools&&this.stockTools.guiEnabled&&this.stockTools.redraw()});var g=function(){function a(a,b,c){this.wrapper=this.toolbar=this.submenu=this.showhideBtn=this.listWrapper=this.arrowWrapper=this.arrowUp=this.arrowDown=void 0;this.chart=c;this.options=a;this.lang=b;this.iconsURL=this.getIconsURL();
this.guiEnabled=a.enabled;this.visible=B(a.visible,!0);this.placed=B(a.placed,!1);this.eventsToUnbind=[];this.guiEnabled&&(this.createHTML(),this.init(),this.showHideNavigatorion());f(this,"afterInit")}a.prototype.init=function(){var a=this,b=this.lang,c=this.options,d=this.toolbar,e=a.addSubmenu,f=c.definitions,g=d.childNodes,h;c.buttons.forEach(function(c){h=a.addButton(d,f,c,b);a.eventsToUnbind.push(l(h.buttonWrapper,"click",function(){a.eraseActiveButtons(g,h.buttonWrapper)}));r(f[c].items)&&
e.call(a,h,f[c])})};a.prototype.addSubmenu=function(a,b){var d=this,f=a.submenuArrow,k=a.buttonWrapper,g=e(k,"width"),h=this.wrapper,t=this.listWrapper,m=this.toolbar.childNodes,n=0,p;this.submenu=p=q("ul",{className:"highcharts-submenu-wrapper"},null,k);this.addSubmenuItems(k,b);d.eventsToUnbind.push(l(f,"click",function(a){a.stopPropagation();d.eraseActiveButtons(m,k);0<=k.className.indexOf("highcharts-current")?(t.style.width=t.startWidth+"px",k.classList.remove("highcharts-current"),p.style.display=
"none"):(p.style.display="block",n=p.offsetHeight-k.offsetHeight-3,p.offsetHeight+k.offsetTop>h.offsetHeight&&k.offsetTop>n||(n=0),c(p,{top:-n+"px",left:g+3+"px"}),k.className+=" highcharts-current",t.startWidth=h.offsetWidth,t.style.width=t.startWidth+e(t,"padding-left")+p.offsetWidth+3+"px")}))};a.prototype.addSubmenuItems=function(a,b){var c=this,d=this.submenu,e=this.lang,f=this.listWrapper,k;b.items.forEach(function(g){k=c.addButton(d,b,g,e);c.eventsToUnbind.push(l(k.mainButton,"click",function(){c.switchSymbol(this,
a,!0);f.style.width=f.startWidth+"px";d.style.display="none"}))});var g=d.querySelectorAll("li > .highcharts-menu-item-btn")[0];c.switchSymbol(g,!1)};a.prototype.eraseActiveButtons=function(a,b,c){[].forEach.call(a,function(a){a!==b&&(a.classList.remove("highcharts-current"),a.classList.remove("highcharts-active"),c=a.querySelectorAll(".highcharts-submenu-wrapper"),0<c.length&&(c[0].style.display="none"))})};a.prototype.addButton=function(b,c,d,e){void 0===e&&(e={});c=c[d];var f=c.items,k=c.className||
"";d=q("li",{className:B(a.prototype.classMapping[d],"")+" "+k,title:e[d]||d},null,b);b=q("span",{className:"highcharts-menu-item-btn"},null,d);if(f&&f.length){var g=q("span",{className:"highcharts-submenu-item-arrow highcharts-arrow-right"},null,d);g.style["background-image"]="url("+this.iconsURL+"arrow-bottom.svg)"}else b.style["background-image"]="url("+this.iconsURL+c.symbol+")";return{buttonWrapper:d,mainButton:b,submenuArrow:g}};a.prototype.addNavigation=function(){var a=this.wrapper;this.arrowWrapper=
q("div",{className:"highcharts-arrow-wrapper"});this.arrowUp=q("div",{className:"highcharts-arrow-up"},null,this.arrowWrapper);this.arrowUp.style["background-image"]="url("+this.iconsURL+"arrow-right.svg)";this.arrowDown=q("div",{className:"highcharts-arrow-down"},null,this.arrowWrapper);this.arrowDown.style["background-image"]="url("+this.iconsURL+"arrow-right.svg)";a.insertBefore(this.arrowWrapper,a.childNodes[0]);this.scrollButtons()};a.prototype.scrollButtons=function(){var a=0,b=this.wrapper,
c=this.toolbar,d=.1*b.offsetHeight;this.eventsToUnbind.push(l(this.arrowUp,"click",function(){0<a&&(a-=d,c.style["margin-top"]=-a+"px")}));this.eventsToUnbind.push(l(this.arrowDown,"click",function(){b.offsetHeight+a<=c.offsetHeight+d&&(a+=d,c.style["margin-top"]=-a+"px")}))};a.prototype.createHTML=function(){var a=this.chart,b=this.options,c=a.container;a=a.options.navigation;this.wrapper=a=q("div",{className:"highcharts-stocktools-wrapper "+b.className+" "+(a&&a.bindingsClassName)});c.parentNode.insertBefore(a,
c);this.toolbar=c=q("ul",{className:"highcharts-stocktools-toolbar "+b.toolbarClassName});this.listWrapper=b=q("div",{className:"highcharts-menu-wrapper"});a.insertBefore(b,a.childNodes[0]);b.insertBefore(c,b.childNodes[0]);this.showHideToolbar();this.addNavigation()};a.prototype.showHideNavigatorion=function(){this.visible&&this.toolbar.offsetHeight>this.wrapper.offsetHeight-50?this.arrowWrapper.style.display="block":(this.toolbar.style.marginTop="0px",this.arrowWrapper.style.display="none")};a.prototype.showHideToolbar=
function(){var a=this.chart,b=this.wrapper,c=this.listWrapper,d=this.submenu,f=this.visible,g;this.showhideBtn=g=q("div",{className:"highcharts-toggle-toolbar highcharts-arrow-left"},null,b);g.style["background-image"]="url("+this.iconsURL+"arrow-right.svg)";f?(b.style.height="100%",g.style.top=e(c,"padding-top")+"px",g.style.left=b.offsetWidth+e(c,"padding-left")+"px"):(d&&(d.style.display="none"),g.style.left="0px",this.visible=f=!1,c.classList.add("highcharts-hide"),g.classList.toggle("highcharts-arrow-right"),
b.style.height=g.offsetHeight+"px");this.eventsToUnbind.push(l(g,"click",function(){a.update({stockTools:{gui:{visible:!f,placed:!0}}})}))};a.prototype.switchSymbol=function(a,b){var c=a.parentNode,d=c.classList.value;c=c.parentNode.parentNode;c.className="";d&&c.classList.add(d.trim());c.querySelectorAll(".highcharts-menu-item-btn")[0].style["background-image"]=a.style["background-image"];b&&this.selectButton(c)};a.prototype.selectButton=function(a){0<=a.className.indexOf("highcharts-active")?a.classList.remove("highcharts-active"):
a.classList.add("highcharts-active")};a.prototype.unselectAllButtons=function(a){var b=a.parentNode.querySelectorAll(".highcharts-active");[].forEach.call(b,function(b){b!==a&&b.classList.remove("highcharts-active")})};a.prototype.update=function(a){h(!0,this.chart.options.stockTools,a);this.destroy();this.chart.setStockTools(a);this.chart.navigationBindings&&this.chart.navigationBindings.update()};a.prototype.destroy=function(){var a=this.wrapper,b=a&&a.parentNode;this.eventsToUnbind.forEach(function(a){a()});
b&&b.removeChild(a);this.chart.isDirtyBox=!0;this.chart.redraw()};a.prototype.redraw=function(){this.showHideNavigatorion()};a.prototype.getIconsURL=function(){return this.chart.options.navigation.iconsURL||this.options.iconsURL||"https://code.highcharts.com/8.2.2/gfx/stock-icons/"};return a}();g.prototype.classMapping={circle:"highcharts-circle-annotation",rectangle:"highcharts-rectangle-annotation",label:"highcharts-label-annotation",segment:"highcharts-segment",arrowSegment:"highcharts-arrow-segment",
ray:"highcharts-ray",arrowRay:"highcharts-arrow-ray",line:"highcharts-infinity-line",arrowLine:"highcharts-arrow-infinity-line",verticalLine:"highcharts-vertical-line",horizontalLine:"highcharts-horizontal-line",crooked3:"highcharts-crooked3",crooked5:"highcharts-crooked5",elliott3:"highcharts-elliott3",elliott5:"highcharts-elliott5",pitchfork:"highcharts-pitchfork",fibonacci:"highcharts-fibonacci",parallelChannel:"highcharts-parallel-channel",measureX:"highcharts-measure-x",measureY:"highcharts-measure-y",
measureXY:"highcharts-measure-xy",verticalCounter:"highcharts-vertical-counter",verticalLabel:"highcharts-vertical-label",verticalArrow:"highcharts-vertical-arrow",currentPriceIndicator:"highcharts-current-price-indicator",indicators:"highcharts-indicators",flagCirclepin:"highcharts-flag-circlepin",flagDiamondpin:"highcharts-flag-diamondpin",flagSquarepin:"highcharts-flag-squarepin",flagSimplepin:"highcharts-flag-simplepin",zoomX:"highcharts-zoom-x",zoomY:"highcharts-zoom-y",zoomXY:"highcharts-zoom-xy",
typeLine:"highcharts-series-type-line",typeOHLC:"highcharts-series-type-ohlc",typeCandlestick:"highcharts-series-type-candlestick",fullScreen:"highcharts-full-screen",toggleAnnotations:"highcharts-toggle-annotations",saveChart:"highcharts-save-chart",separator:"highcharts-separator"};w(b.prototype,{setStockTools:function(a){var b=this.options,c=b.lang;a=h(b.stockTools&&b.stockTools.gui,a&&a.gui);this.stockTools=new g(a,c.stockTools&&c.stockTools.gui,this);this.stockTools.guiEnabled&&(this.isDirtyBox=
!0)}});l(n,"selectButton",function(a){var b=a.button,c=this.chart.stockTools;c&&c.guiEnabled&&(c.unselectAllButtons(a.button),0<=b.parentNode.className.indexOf("highcharts-submenu-wrapper")&&(b=b.parentNode.parentNode),c.selectButton(b))});l(n,"deselectButton",function(a){a=a.button;var b=this.chart.stockTools;b&&b.guiEnabled&&(0<=a.parentNode.className.indexOf("highcharts-submenu-wrapper")&&(a=a.parentNode.parentNode),b.selectButton(a))});d.Toolbar=g;return d.Toolbar});q(d,"masters/modules/stock-tools.src.js",
[],function(){})});
//# sourceMappingURL=stock-tools.js.map